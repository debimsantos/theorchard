<!DOCTYPE html>
<html>

<head>
    <title>The Orchard - Residences</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="./assets/css/style.css" />
    <style>
        label.error {
            font-weight: bold !important;
            font-size: 98% !important;
            color: red !important;
            text-align: left !important;
            margin-bottom: 5px !important;
            margin-top: -8px !important;
            margin-left: 2px !important;
            font-family: helvetica;
        }
    </style>
    <link href="https://fonts.googleapis.com/css?family=Rouge+Script&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <div id="container">

        <header class="main_header">
            <a href="./index.html">
                <img id="logo" src="./assets/img/orchard_logo_small.jpg" />
            </a>
            <nav class="main_nav">
                <ul>
                    <li>
                        <a class="active" href="#">RESIDENCES</a>
                    </li>
                    <li>
                        <a href="./retail.html">RETAIL</a>
                    </li>
                </ul>
            </nav>
        </header>
        <div id="main">
            <div id="content">
                <article>
                    <img id="banner" src="./assets/img/orchard.jpg" />
                </article>
            </div>
            <!--
            <div class="section_divider">
                <img src="./assets/img/border-divider.jpg" />
            </div>
            -->
            <div id="sub_content">
                <article class="description">
                    <header>
                        <p>
                            The Orchard is an exciting new town center designed by WHA and developed by Serrano Development Group. The mixed-use
                            project is in the City of Azusaâ€™s Downtown District, located at the intersection of Azusa Ave (SR-39) and Foothill Blvd
                            (Route 66). This unique urban destination includes 163 new residential units, 23,000 S.F. of retail and a new Laemmle
                            Theater.
                        </p>

                    </header>
                </article>
            </div>
            <aside class="contact">
                <div id="block">
                    <div id="contact_forms">
                        <form id="residential_form" method="post" action="./mailer.php">
                            <label>Interest List</label>
                            <input name="name" id="name" type="text" placeholder="Name" />
                            <input name="email" id="email" type="email" placeholder="Email" />
                            <input name="phone" id="phone" type="tel" placeholder="Phone Number" />
                            <input name="beds" id="beds" type="number" placeholder="Number of Bedrooms" />
                            <input name="occupants" id="occupants" type="text" placeholder="Number of Occupants" />
                            <input name="date" id="date" type="date" placeholder="Desired Move in Date" />
                            <input name="age" id="age" type="number" placeholder="Age" />
                            <input name="from" id="from" type="text" placeholder="Where you are moving from?" />
                            <input name="heardAbout" id="heardAbout" type="text"
                                placeholder="How did you hear about us?" />
                            <label id="lblError" class="error"
                                style="visibility:hidden;display:block !important;"></label>
                            <div class="frm_buttons">
                                <button class="frm_button" style="width:49%;float:left;"
                                    onclick="clearForm(event);">Clear</button>
                                <button name="submit" id="submit" class="frm_button" style="width:49%;float:right;"
                                    type="submit">Submit</button>
                            </div>
                        </form>
                    </div>
                </div>
            </aside>
        </div>
        <div class=clr></div>
        <footer>
            <div>
                <p style="float:left;">
                    The Orchard. Downtown Azusa
                </p>
                <p style="float:right;">
                    Web Design by <a href="http://www.yourtechy.com" target="_blank">yourtechy.com </a>
                </p>
            </div>
        </footer>

    </div>

    <script src="./assets/js/jquery.min.js" type="text/javascript"></script>
    <script src="./assets/js/jquery.validate.js" type="text/javascript"></script>
    <script src="./assets/js/additional-methods.js" type="text/javascript"></script>
    <script src="./assets/js/mailer.js" type="text/javascript"></script>

    <script>

        function setupValidator() {

            $('#residential_form').validate({
                rules: {
                    name: {
                        required: true,
                        letterswithbasicpunc: true
                    },
                    email: {
                        required: true,
                        email: true
                    },
                    phone: {
                        required: true,
                        maxlength: 30,
                        phoneUS: true
                    },
                    beds: {
                        required: true,
                        number: true
                    },
                    occupants: {
                        required: true,
                        number: true
                    },
                    date: {
                        required: true,
                        date: true
                    },
                    age: {
                        required: true,
                        number: true
                    },
                    from: {
                        required: true,
                    },
                },
                messages: {
                    name: {
                        required: 'Name is required.',
                        letterswithbasicpunc: 'Invalid Characters detected.'
                    },
                    email: {
                        required: 'Email is required.',
                        email: 'Please enter a valid email address.'
                    },
                    phone: {
                        required: 'Phone is required.',
                        phoneUS: 'Please enter a valid phone. (e.g.: 213-222-3400)'
                    },
                    beds: {
                        required: 'Number of beds is required.',
                        number: 'Please enter numeric values only.'
                    },
                    occupants: {
                        required: 'Number of occupants is required.',
                        number: 'Please enter numeric values only.'
                    },
                    date: {
                        required: 'Date is required.',
                        number: 'Please enter numeric values only. (e.g.: mm/dd/yyyy)'
                    },
                    age: {
                        required: 'Age is required',
                        number: 'Please enter numeric values only.'
                    },
                    from: {
                        required: 'Please indicate where you are moving from',
                    },
                }
            })
        }

        function clearForm(event) {
            var form = $('#residential_form')
            var validator = form.validate();
            validator.reset();
            validator.resetForm();
            form[0].reset();
        }

        function handleResponse(res) {
            if (typeof res.status !== 'undefined' &&
                0 == res.status) {
                alert(res.error)
                clearForm();
            } else {
                $('#lblError').text(res.error);
                $('#lblError').css('visibility', 'visible')
                $('#lblError').css('display', 'block')
            }
        }

        function setupForm() {
            var form = $('#residential_form')
            // process the form
            // monitor submit event and check if validation passed, if not. cancel submit.
            form.on('submit', function (e) {
                e.preventDefault();
                var valid = form.valid();
                if (valid) {
                    $('#lblError').css('visibility', 'hidden')
                    $('#lblError').css('display', 'none')
                    // get the form data
                    var method = form.attr('method')
                    var url = form.attr('action')
                    var data = {
                        'type': 'residential',
                        'name': $('#name').val(),
                        'email': $('#email').val(),
                        'Phone': $('#phone').val(),
                        'No. of Bedrooms': $('#beds').val(),
                        'No. of Occupants': $('#occupants').val(),
                        'Move in Date': $('#date').val(),
                        'Age': $('#age').val(),
                        'Moving From': $('#from').val(),
                    };
                    send_mail(method, url, data, function (res) {
                        handleResponse(JSON.parse(res))
                    },
                        function (err) {
                            console.error(err)
                        });
                }
            })
        }

        $(document).ready(function () {
            setupValidator();
            setupForm();
        })

    </script>

</body>

</html>